var PackageUpdateBlacklistPage=Class.create({add:function(e){var r=prompt(language["wcf.acp.packageUpdate.blacklist.versionPrompt"],"");if(null!=r&&""!=r){var s=r.indexOf("*");if(-1!=s&&s!=r.length-1||"*"==r)return this.showError($("wildcardAddError")),void 0;new Ajax.Request("index.php?action=PackageUpdateBlacklistAdd"+SID_ARG_2ND,{method:"post",parameters:{packageID:e,blacklistPackageVersion:r},onSuccess:function(){window.location.href=this.removeSuccessParameters(window.location.href)+"&success=add"}.bind(this),onFailure:function(){this.showError($("addError"))}.bind(this)})}else this.hideErrorSuccess()},remove:function(e,r){new Ajax.Request("index.php?action=PackageUpdateBlacklistRemove"+SID_ARG_2ND,{method:"post",parameters:{packageID:e,blacklistPackageVersion:r},onSuccess:function(){window.location.href=this.removeSuccessParameters(window.location.href)+"&success=remove"}.bind(this),onFailure:function(){this.showError($("removeError"))}.bind(this)})},removeSuccessParameters:function(e){var r=e.indexOf("&success=add");-1!=r&&(e=e.substr(0,r)+e.substr(r+12));var s=e.indexOf("&success=remove");return-1!=s&&(e=e.substr(0,s)+e.substr(s+15)),e},showError:function(e){var r=[];r.push(e.visible()?new Effect.Pulsate(e,{duration:.5,pulses:3}):new Effect.BlindDown(e,{duration:.5})),this.hideErrorSuccess(r,e)},hideErrorSuccess:function(e,r){var s="undefined"!=typeof e?e:[];$("addError").visible()&&r!=$("addError")&&s.push(new Effect.BlindUp($("addError"),{sync:!0})),$("wildcardAddError").visible()&&r!=$("wildcardAddError")&&s.push(new Effect.BlindUp($("wildcardAddError"),{sync:!0})),$("removeError").visible()&&r!=$("removeError")&&s.push(new Effect.BlindUp($("removeError"),{sync:!0})),null!=$("success")&&$("success").visible()&&r!=$("success")&&s.push(new Effect.BlindUp($("success"),{sync:!0})),s.length>0&&new Effect.Parallel(s,{duration:.5})}});